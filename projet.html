<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSMA/CD vs CSMA/CA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            color: white;
            padding: 40px 20px;
        }
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .nav-btn {
            background: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        .nav-btn.active {
            background: #4CAF50;
            color: white;
        }
        .section {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            animation: fadeIn 0.5s;
        }
        .section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        h3 {
            color: #764ba2;
            margin: 25px 0 15px 0;
            font-size: 1.5em;
        }
        .info-box {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .simulation-area {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
        }
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .control-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }
        .control-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }
        .control-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .control-btn.stop {
            background: #f44336;
        }
        .canvas-container {
            background: #0f0f1e;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        canvas {
            width: 100%;
            border-radius: 5px;
            background: #1a1a2e;
        }
        .devices {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .device {
            text-align: center;
        }
        .device-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 2em;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        .device-icon.active {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.8);
        }
        .device-icon.collision {
            animation: shake 0.5s;
            background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .device-label {
            color: white;
            font-weight: 600;
            margin-top: 5px;
        }
        .device-status {
            color: #4CAF50;
            font-size: 0.85em;
            margin-top: 5px;
            min-height: 20px;
            font-weight: 600;
        }
        .status-display {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            color: white;
            font-family: 'Courier New', monospace;
            min-height: 100px;
            max-height: 300px;
            overflow-y: auto;
        }
        .step-indicator {
            background: rgba(76, 175, 80, 0.3);
            border-left: 4px solid #4CAF50;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            color: white;
            font-weight: 600;
            animation: slideIn 0.3s;
        }
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .backoff-explanation {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: white;
        }
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
            color: white;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .legend-color {
            width: 30px;
            height: 15px;
            border-radius: 3px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        .comparison-table tr:hover {
            background: #f5f5f5;
        }
        .protocol-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        .protocol-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            flex: 1;
            max-width: 250px;
        }
        .protocol-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        .protocol-card.selected {
            border-color: #667eea;
            background: #e8eaf6;
        }
        .quiz-container {
            margin: 30px 0;
        }
        .question {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .question h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            background: white;
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }
        .option.selected {
            border-color: #667eea;
            background: #e8eaf6;
        }
        .option.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }
        .option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }
        .quiz-result {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
        }
        .score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>CSMA/CD vs CSMA/CA</h1>
            <p class="subtitle">Comprendre les protocoles d'acc√®s au m√©dia</p>
        </header>
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('intro')">Introduction</button>
            <button class="nav-btn" onclick="showSection('collision')">Collision</button>
            <button class="nav-btn" onclick="showSection('csmacd')">CSMA/CD</button>
            <button class="nav-btn" onclick="showSection('csmaca')">CSMA/CA</button>
            <button class="nav-btn" onclick="showSection('comparison')">Comparaison</button>
            <button class="nav-btn" onclick="showSection('quiz')">Quiz</button>
        </div>
        <!-- Introduction -->
        <div class="section active" id="intro">
            <h2>üì° Introduction aux Protocoles CSMA</h2>
            
            <div class="info-box">
                <h3>Qu'est-ce que CSMA ?</h3>
                <p><strong>CSMA (Carrier Sense Multiple Access)</strong> est une famille de protocoles qui permet √† plusieurs dispositifs de partager un m√™me canal de communication.</p>
            </div>
            <h3>üéØ Principe de base</h3>
            <p>Avant d'√©mettre, chaque dispositif :</p>
            <ol style="margin-left: 20px; line-height: 1.8;">
                <li><strong>√âcoute le canal</strong> (Carrier Sense)</li>
                <li><strong>V√©rifie s'il est libre</strong></li>
                <li><strong>Transmet ses donn√©es</strong> si le canal est disponible</li>
            </ol>
            <div class="info-box">
                <h3>‚ö° Probl√®me : Les Collisions</h3>
                <p>Lorsque deux dispositifs transmettent simultan√©ment, leurs signaux se superposent et cr√©ent une <strong>collision</strong>. Les donn√©es deviennent alors corrompues et illisibles.</p>
            </div>
            <h3>üîÄ Deux Solutions Diff√©rentes</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div class="info-box">
                    <h4 style="color: #667eea;">CSMA/CD (Collision Detection)</h4>
                    <p><strong>D√©tecte</strong> les collisions apr√®s qu'elles se produisent</p>
                    <p>üìç Utilis√© dans : <strong>Ethernet filaire</strong></p>
                </div>
                <div class="info-box">
                    <h4 style="color: #764ba2;">CSMA/CA (Collision Avoidance)</h4>
                    <p><strong>√âvite</strong> les collisions avant qu'elles ne se produisent</p>
                    <p>üìç Utilis√© dans : <strong>WiFi (802.11)</strong></p>
                </div>
            </div>
        </div>
        <!-- Collision Section -->
        <div class="section" id="collision">
            <h2>üí• Comment se produisent les Collisions ?</h2>
            
            <div class="simulation-area">
                <h3 style="color: white; text-align: center; margin-bottom: 20px;">Simulation de Collision</h3>
                
                <div class="devices">
                    <div class="device">
                        <div class="device-icon" id="col-d1">üñ•Ô∏è</div>
                        <div class="device-label">PC 1</div>
                        <div class="device-status" id="col-status-1"></div>
                    </div>
                    <div class="device">
                        <div class="device-icon" id="col-d2">üíª</div>
                        <div class="device-label">PC 2</div>
                        <div class="device-status" id="col-status-2"></div>
                    </div>
                </div>
                <div class="canvas-container">
                    <canvas id="collisionCanvas" width="800" height="250"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4CAF50;"></div>
                        <span>Signal PC 1</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #2196F3;"></div>
                        <span>Signal PC 2</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6b6b;"></div>
                        <span>Collision</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="control-btn" onclick="startCollisionDemo()">‚ñ∂ D√©marrer</button>
                    <button class="control-btn stop" onclick="stopCollisionDemo()">‚èπ Arr√™ter</button>
                </div>
                <div class="status-display" id="collisionStatus"></div>
            </div>
            <div class="info-box">
                <h3>üìä Ce qui se passe pendant une collision :</h3>
                <ol style="margin-left: 20px; line-height: 1.8;">
                    <li>PC 1 et PC 2 √©coutent le canal ‚Üí Canal libre ‚úì</li>
                    <li>Les deux commencent √† transmettre <strong>simultan√©ment</strong></li>
                    <li>Les signaux se superposent sur le canal</li>
                    <li>Les donn√©es deviennent <strong>corrompues</strong> et illisibles</li>
                    <li>La transmission √©choue pour les deux dispositifs</li>
                </ol>
            </div>
        </div>
        <!-- CSMA/CD Section -->
        <div class="section" id="csmacd">
            <h2>üîç CSMA/CD - Collision Detection</h2>
            
            <div class="info-box">
                <h3>Principe de Fonctionnement</h3>
                <p>CSMA/CD d√©tecte les collisions <strong>pendant</strong> la transmission et r√©agit imm√©diatement.</p>
            </div>
            <div class="simulation-area">
                <h3 style="color: white; text-align: center; margin-bottom: 20px;">Simulation CSMA/CD</h3>
                
                <div class="devices">
                    <div class="device">
                        <div class="device-icon" id="cd-d1">üñ•Ô∏è</div>
                        <div class="device-label">PC 1</div>
                        <div class="device-status" id="cd-status-1"></div>
                    </div>
                    <div class="device">
                        <div class="device-icon" id="cd-d2">üíª</div>
                        <div class="device-label">PC 2</div>
                        <div class="device-status" id="cd-status-2"></div>
                    </div>
                </div>
                <div class="canvas-container">
                    <canvas id="csmacdCanvas" width="800" height="250"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4CAF50;"></div>
                        <span>Transmission</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6b6b;"></div>
                        <span>Collision + JAM</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffd93d;"></div>
                        <span>Attente Backoff</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="control-btn" onclick="startCSMACD()">‚ñ∂ D√©marrer</button>
                    <button class="control-btn stop" onclick="stopCSMACD()">‚èπ Arr√™ter</button>
                </div>
                <div id="backoffExplanation" class="backoff-explanation" style="display: none;"></div>
                <div class="status-display" id="csmacdStatus"></div>
            </div>
            <h3>üîÑ √âtapes du Protocole CSMA/CD</h3>
            <div style="margin-left: 20px; line-height: 2;">
                <p><strong>1. √âcoute du Canal</strong> - Le dispositif v√©rifie si le canal est libre</p>
                <p><strong>2. Transmission</strong> - Si libre, commence √† transmettre</p>
                <p><strong>3. D√©tection de Collision</strong> - Surveille le canal pendant la transmission</p>
                <p><strong>4. Signal JAM</strong> - Si collision, envoie un signal JAM</p>
                <p><strong>5. Backoff Exponentiel</strong> - Attend un temps al√©atoire avant de r√©essayer</p>
                <p><strong>6. Retransmission</strong> - Recommence le processus</p>
            </div>
            <div class="info-box">
                <h3>‚è±Ô∏è Algorithme de Backoff Exponentiel</h3>
                <p>Apr√®s chaque collision, le temps d'attente est calcul√© :</p>
                <p style="margin-top: 10px;"><code>Temps = Random(0, 2^n - 1) √ó Slot Time</code></p>
                <p style="margin-top: 10px;">o√π <strong>n</strong> = nombre de collisions (max 10)</p>
                <div style="margin-top: 15px; line-height: 1.8;">
                    <p><strong>Exemple :</strong></p>
                    <p>üî∏ 1√®re collision : n=1 ‚Üí attente entre 0 et 1 slot</p>
                    <p>üî∏ 2√®me collision : n=2 ‚Üí attente entre 0 et 3 slots</p>
                    <p>üî∏ 3√®me collision : n=3 ‚Üí attente entre 0 et 7 slots</p>
                    <p style="margin-top: 10px; color: #667eea; font-weight: 600;">
                        Plus il y a de collisions, plus l'attente est longue !
                    </p>
                </div>
            </div>
        </div>
        <!-- CSMA/CA Section -->
        <div class="section" id="csmaca">
            <h2>üõ°Ô∏è CSMA/CA - Collision Avoidance</h2>
            
            <div class="info-box">
                <h3>Principe de Fonctionnement</h3>
                <p>CSMA/CA <strong>√©vite</strong> les collisions en utilisant un m√©canisme de r√©servation du canal avant la transmission.</p>
            </div>
            <div class="simulation-area">
                <h3 style="color: white; text-align: center; margin-bottom: 20px;">ü§ù Simulation CSMA/CA avec Handshake</h3>
                
                <div class="devices">
                    <div class="device">
                        <div class="device-icon" id="ca-d1">üì±</div>
                        <div class="device-label">Device 1</div>
                        <div class="device-status" id="ca-status-d1"></div>
                    </div>
                    <div class="device">
                        <div class="device-icon" id="ca-ap">üî∑</div>
                        <div class="device-label">Access Point</div>
                        <div class="device-status" id="ca-status-ap"></div>
                    </div>
                </div>
                <div class="canvas-container">
                    <canvas id="csmacaCanvas" width="800" height="250"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff9800;"></div>
                        <span>RTS</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #2196F3;"></div>
                        <span>CTS</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4CAF50;"></div>
                        <span>DATA</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #9C27B0;"></div>
                        <span>ACK</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="control-btn" onclick="startCSMACA()">‚ñ∂ D√©marrer</button>
                    <button class="control-btn stop" onclick="stopCSMACA()">‚èπ Arr√™ter</button>
                </div>
                <div class="status-display" id="csmacaStatus"></div>
            </div>
            <h3>üîÑ M√©canisme RTS/CTS - Le Handshake du WiFi</h3>
            <div class="info-box" style="background: linear-gradient(135deg, #667eea22 0%, #764ba222 100%); border-left: 5px solid #9C27B0;">
                <h4 style="color: #9C27B0;">ü§ù Comme une poign√©e de main polie !</h4>
                <p style="margin-top: 10px;">
                    Les dispositifs WiFi se "saluent" avant de transmettre des donn√©es.
                </p>
            </div>
            <div style="margin-left: 20px; line-height: 2;">
                <p><strong>1. DIFS</strong> - V√©rification de l'espace inter-trame</p>
                <p><strong>2. RTS üì§</strong> - "Puis-je parler ?"</p>
                <p><strong>3. CTS üì•</strong> - "Oui, vas-y !"</p>
                <p><strong>4. R√©servation üîí</strong> - Les autres restent silencieux</p>
                <p><strong>5. DATA üìä</strong> - Envoi des donn√©es</p>
                <p><strong>6. ACK ‚úÖ</strong> - "Bien re√ßu !"</p>
            </div>
        </div>
        <!-- Comparison Section -->
        <div class="section" id="comparison">
            <h2>‚öñÔ∏è Comparaison CSMA/CD vs CSMA/CA</h2>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Crit√®re</th>
                        <th>CSMA/CD</th>
                        <th>CSMA/CA</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Signification</strong></td>
                        <td>Collision Detection</td>
                        <td>Collision Avoidance</td>
                    </tr>
                    <tr>
                        <td><strong>Approche</strong></td>
                        <td>D√©tecte et g√®re les collisions</td>
                        <td>√âvite les collisions</td>
                    </tr>
                    <tr>
                        <td><strong>Technologie</strong></td>
                        <td>Ethernet filaire (802.3)</td>
                        <td>WiFi sans fil (802.11)</td>
                    </tr>
                    <tr>
                        <td><strong>M√©canisme</strong></td>
                        <td>Signal JAM + Backoff</td>
                        <td>RTS/CTS + ACK</td>
                    </tr>
                    <tr>
                        <td><strong>Efficacit√©</strong></td>
                        <td>Plus rapide si peu de collisions</td>
                        <td>Plus fiable mais overhead</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Quiz Section -->
        <div class="section" id="quiz">
            <h2>üìù Quiz - Testez vos connaissances</h2>
            
            <div class="quiz-container" id="quizContainer"></div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="control-btn" onclick="submitQuiz()" id="submitQuizBtn">Soumettre</button>
                <button class="control-btn" onclick="resetQuiz()" style="background: #ff9800;">Recommencer</button>
            </div>
            <div id="quizResultContainer"></div>
        </div>
    </div>
    <script>
        var animationFrames = {};
        var collisionStopped = false;
        var csmacdStopped = false;
        var csmacaStopped = false;
        var quizQuestions = [
            {
                question: "Que signifie CSMA ?",
                options: [
                    "Carrier Sense Multiple Access",
                    "Communication System Multiple Array",
                    "Control Signal Management Access",
                    "Collision Safety Media Access"
                ],
                correct: 0
            },
            {
                question: "Quelle est la principale diff√©rence entre CSMA/CD et CSMA/CA ?",
                options: [
                    "CSMA/CD est plus rapide",
                    "CSMA/CD d√©tecte les collisions, CSMA/CA les √©vite",
                    "CSMA/CA utilise des c√¢bles",
                    "CSMA/CD n'utilise pas de signal JAM"
                ],
                correct: 1
            },
            {
                question: "Quel protocole est utilis√© dans les r√©seaux WiFi ?",
                options: [
                    "CSMA/CD",
                    "CSMA/CA",
                    "ALOHA",
                    "Token Ring"
                ],
                correct: 1
            },
            {
                question: "Que fait un dispositif CSMA/CD quand il d√©tecte une collision ?",
                options: [
                    "Il continue la transmission",
                    "Il attend ind√©finiment",
                    "Il envoie un signal JAM et attend un temps al√©atoire",
                    "Il arr√™te d√©finitivement"
                ],
                correct: 2
            },
            {
                question: "Que signifie RTS dans CSMA/CA ?",
                options: [
                    "Ready To Send",
                    "Request To Send",
                    "Return To Sender",
                    "Real Time Signal"
                ],
                correct: 1
            },
            {
                question: "Quel est le r√¥le du signal CTS ?",
                options: [
                    "Cancel The Signal",
                    "Clear To Send - autoriser la transmission",
                    "Check The Status",
                    "Control Time Signal"
                ],
                correct: 1
            },
            {
                question: "Pourquoi CSMA/CA est-il n√©cessaire pour le WiFi ?",
                options: [
                    "C'est moins cher",
                    "La d√©tection de collision est difficile en sans fil",
                    "Il est plus rapide",
                    "Il consomme moins d'√©nergie"
                ],
                correct: 1
            },
            {
                question: "Qu'est-ce que l'algorithme de Backoff Exponentiel ?",
                options: [
                    "Un algorithme de cryptage",
                    "Une m√©thode pour augmenter le temps d'attente apr√®s chaque collision",
                    "Un protocole de routage",
                    "Une technique de compression"
                ],
                correct: 1
            },
            {
                question: "Dans quel contexte CSMA/CD est-il encore utilis√© ?",
                options: [
                    "R√©seaux WiFi modernes",
                    "R√©seaux 5G",
                    "Anciens r√©seaux Ethernet avec hubs",
                    "Bluetooth"
                ],
                correct: 2
            },
            {
                question: "Quel probl√®me le m√©canisme RTS/CTS r√©sout-il ?",
                options: [
                    "Le probl√®me de vitesse",
                    "Le probl√®me du terminal cach√©",
                    "Le probl√®me de cryptage",
                    "Le probl√®me de routage"
                ],
                correct: 1
            }
        ];
        function showSection(sectionId) {
            var sections = document.querySelectorAll('.section');
            var buttons = document.querySelectorAll('.nav-btn');
            
            for (var i = 0; i < sections.length; i++) {
                sections[i].classList.remove('active');
            }
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            stopAllAnimations();
            
            if (sectionId === 'quiz' && document.getElementById('quizContainer').children.length === 0) {
                initQuiz();
            }
        }
        function stopAllAnimations() {
            collisionStopped = true;
            csmacdStopped = true;
            csmacaStopped = true;
            for (var key in animationFrames) {
                cancelAnimationFrame(animationFrames[key]);
            }
        }
        function drawArrow(ctx, fromX, fromY, toX, toY, color) {
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;
            
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();
            
            var angle = Math.atan2(toY - fromY, toX - fromX);
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - 15 * Math.cos(angle - Math.PI / 6), toY - 15 * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(toX - 15 * Math.cos(angle + Math.PI / 6), toY - 15 * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fill();
        }
        // Collision Demo
        function startCollisionDemo() {
            collisionStopped = false;
            var canvas = document.getElementById('collisionCanvas');
            var ctx = canvas.getContext('2d');
            var status = document.getElementById('collisionStatus');
            var time = 0;
            
            status.innerHTML = '';
            
            function addStatus(msg) {
                var line = document.createElement('div');
                line.className = 'step-indicator';
                line.textContent = msg;
                status.insertBefore(line, status.firstChild);
                if (status.children.length > 6) status.removeChild(status.lastChild);
            }
            
            function setStatus(id, text, color) {
                var el = document.getElementById(id);
                if (el) {
                    el.textContent = text;
                    el.style.color = color || '#4CAF50';
                }
            }
            
            function animate() {
                if (collisionStopped) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                ctx.strokeStyle = '#444';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(50, 125);
                ctx.lineTo(canvas.width - 50, 125);
                ctx.stroke();
                
                ctx.fillStyle = '#888';
                ctx.font = '14px Arial';
                ctx.fillText('Canal de communication', canvas.width / 2 - 80, 150);
                
                document.getElementById('col-d1').classList.remove('active', 'collision');
                document.getElementById('col-d2').classList.remove('active', 'collision');
                
                if (time === 0) {
                    addStatus('üîç √âtape 1: Canal libre, dispositifs en attente');
                    setStatus('col-status-1', 'En attente');
                    setStatus('col-status-2', 'En attente');
                }
                
                if (time === 120) {
                    addStatus('üëÄ √âtape 2: PC1 et PC2 v√©rifient le canal');
                    setStatus('col-status-1', '√âcoute...', '#2196F3');
                    setStatus('col-status-2', '√âcoute...', '#2196F3');
                    document.getElementById('col-d1').classList.add('active');
                    document.getElementById('col-d2').classList.add('active');
                }
                
                if (time === 200) {
                    addStatus('‚úÖ √âtape 3: Les deux trouvent le canal LIBRE');
                    setStatus('col-status-1', 'Canal libre ‚úì', '#4CAF50');
                    setStatus('col-status-2', 'Canal libre ‚úì', '#4CAF50');
                }
                
                if (time === 260) {
                    addStatus('üì° √âtape 4: Transmission simultan√©e commence !');
                    setStatus('col-status-1', 'Envoi...', '#ff9800');
                    setStatus('col-status-2', 'Envoi...', '#ff9800');
                }
                
                if (time > 260 && time < 460) {
                    var progress = time - 260;
                    
                    drawArrow(ctx, 150, 50, 150 + progress * 1.5, 115, '#4CAF50');
                    ctx.fillStyle = '#4CAF50';
                    ctx.fillRect(150, 115, progress * 1.5, 20);
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 12px Arial';
                    ctx.fillText('PC1', 160, 130);
                    
                    drawArrow(ctx, canvas.width - 150, 50, canvas.width - 150 - progress * 1.5, 115, '#2196F3');
                    ctx.fillStyle = '#2196F3';
                    ctx.fillRect(canvas.width - 150 - progress * 1.5, 115, progress * 1.5, 20);
                    ctx.fillStyle = 'white';
                    ctx.fillText('PC2', canvas.width - 230, 130);
                }
                
                if (time === 460) {
                    addStatus('üí• √âtape 5: COLLISION D√âTECT√âE !');
                    setStatus('col-status-1', 'COLLISION !', '#ff6b6b');
                    setStatus('col-status-2', 'COLLISION !', '#ff6b6b');
                    document.getElementById('col-d1').classList.add('collision');
                    document.getElementById('col-d2').classList.add('collision');
                }
                
                if (time > 460 && time < 580) {
                    ctx.fillStyle = '#ff6b6b';
                    ctx.fillRect(200, 110, 400, 30);
                    
                    ctx.fillStyle = '#ff6b6b';
                    ctx.font = 'bold 40px Arial';
                    ctx.fillText('üí•', canvas.width / 2 - 20, 105);
                    
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 16px Arial';
                    ctx.fillText('COLLISION !', canvas.width / 2 - 50, 130);
                }
                
                if (time === 600) {
                    addStatus('‚ùå √âtape 6: Donn√©es corrompues - √âchec !');
                    setStatus('col-status-1', '√âchec', '#ff6b6b');
                    setStatus('col-status-2', '√âchec', '#ff6b6b');
                }
                
                if (time > 700) {
                    addStatus('‚úÖ Simulation termin√©e');
                    collisionStopped = true;
                    return;
                }
                
                time++;
                animationFrames.collision = requestAnimationFrame(animate);
            }
            
            animate();
        }
        function stopCollisionDemo() {
            collisionStopped = true;
            if (animationFrames.collision) {
                cancelAnimationFrame(animationFrames.collision);
            }
            var canvas = document.getElementById('collisionCanvas');
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('col-d1').classList.remove('active', 'collision');
            document.getElementById('col-d2').classList.remove('active', 'collision');
            document.getElementById('col-status-1').textContent = '';
            document.getElementById('col-status-2').textContent = '';
        }
        // CSMA/CD Demo
        function startCSMACD() {
            csmacdStopped = false;
            var canvas = document.getElementById('csmacdCanvas');
            var ctx = canvas.getContext('2d');
            var status = document.getElementById('csmacdStatus');
            var backoffExp = document.getElementById('backoffExplanation');
            var time = 0;
            var phase = 0;
            var backoffTime = 3;
            
            status.innerHTML = '';
            backoffExp.style.display = 'none';
            
            function addStatus(msg) {
                var line = document.createElement('div');
                line.className = 'step-indicator';
                line.textContent = msg;
                status.insertBefore(line, status.firstChild);
                if (status.children.length > 6) status.removeChild(status.lastChild);
            }
            
            function setStatus(id, text, color) {
                var el = document.getElementById(id);
                if (el) {
                    el.textContent = text;
                    el.style.color = color || '#4CAF50';
                }
            }
            
            function animate() {
                if (csmacdStopped) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                ctx.strokeStyle = '#444';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(50, 125);
                ctx.lineTo(canvas.width - 50, 125);
                ctx.stroke();
                
                ctx.fillStyle = '#888';
                ctx.font = '14px Arial';
                ctx.fillText('Canal Ethernet', canvas.width / 2 - 50, 150);
                
                document.getElementById('cd-d1').classList.remove('active', 'collision');
                document.getElementById('cd-d2').classList.remove('active', 'collision');
                
                if (phase === 0) {
                    if (time === 0) {
                        addStatus('üîç √âtape 1: Initialisation');
                        setStatus('cd-status-1', 'Pr√™t');
                        setStatus('cd-status-2', 'Pr√™t');
                    }
                    if (time > 100) {
                        phase = 1;
                        time = 0;
                    }
                } else if (phase === 1) {
                    if (time === 60) {
                        addStatus('üëÄ √âtape 2: V√©rification du canal');
                        setStatus('cd-status-1', '√âcoute...', '#2196F3');
                        setStatus('cd-status-2', '√âcoute...', '#2196F3');
                        document.getElementById('cd-d1').classList.add('active');
                        document.getElementById('cd-d2').classList.add('active');
                    }
                    
                    if (time === 120) {
                        addStatus('‚úÖ √âtape 3: Canal libre d√©tect√©');
                        setStatus('cd-status-1', 'Canal libre ‚úì', '#4CAF50');
                        setStatus('cd-status-2', 'Canal libre ‚úì', '#4CAF50');
                    }
                    
                    if (time === 160) {
                        addStatus('üì° √âtape 4: Transmission simultan√©e');
                        setStatus('cd-status-1', 'Envoi...', '#ff9800');
                        setStatus('cd-status-2', 'Envoi...', '#ff9800');
                    }
                    
                    if (time > 180 && time < 340) {
                        var progress = time - 180;
                        
                        drawArrow(ctx, 150, 50, 150 + progress * 1.8, 115, '#4CAF50');
                        ctx.fillStyle = '#4CAF50';
                        ctx.fillRect(150, 115, progress * 1.8, 20);
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 12px Arial';
                        ctx.fillText('PC1', 160, 130);
                        
                        drawArrow(ctx, canvas.width - 150, 50, canvas.width - 150 - progress * 1.8, 115, '#2196F3');
                        ctx.fillStyle = '#2196F3';
                        ctx.fillRect(canvas.width - 150 - progress * 1.8, 115, progress * 1.8, 20);
                        ctx.fillStyle = 'white';
                        ctx.fillText('PC2', canvas.width - 230, 130);
                    }
                    
                    if (time === 340) {
                        addStatus('üí• √âtape 5: COLLISION D√âTECT√âE !');
                        setStatus('cd-status-1', 'COLLISION !', '#ff6b6b');
                        setStatus('cd-status-2', 'COLLISION !', '#ff6b6b');
                        document.getElementById('cd-d1').classList.add('collision');
                        document.getElementById('cd-d2').classList.add('collision');
                    }
                    
                    if (time > 340 && time < 460) {
                        ctx.fillStyle = '#ff6b6b';
                        ctx.fillRect(250, 110, 300, 30);
                        
                        ctx.fillStyle = '#ff6b6b';
                        ctx.font = 'bold 40px Arial';
                        ctx.fillText('üí•', canvas.width / 2 - 20, 105);
                        
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 16px Arial';
                        ctx.fillText('COLLISION', canvas.width / 2 - 50, 130);
                    }
                    
                    if (time === 400) {
                        addStatus('üì¢ √âtape 6: Envoi signal JAM');
                        ctx.fillStyle = '#ff6b6b';
                        ctx.font = 'bold 18px Arial';
                        ctx.fillText('JAM SIGNAL', canvas.width / 2 - 55, 170);
                    }
                    
                    if (time > 500) {
                        phase = 2;
                        time = 0;
                        backoffExp.style.display = 'block';
                        backoffExp.innerHTML = '<h4 style="color: #ffd700; margin-bottom: 10px;">‚è±Ô∏è Algorithme de Backoff Exponentiel</h4><p><strong>Collision #1</strong></p><p>Fen√™tre: 0 √† 3 slots (2^2 - 1)</p><p>Temps choisi: <strong>' + backoffTime + ' slots</strong></p><p style="margin-top: 8px; color: #4CAF50;">Plus il y a de collisions, plus l\'attente peut √™tre longue !</p>';
                    }
                } else if (phase === 2) {
                    if (time === 20) {
                        addStatus('‚è±Ô∏è √âtape 7: Attente Backoff (' + backoffTime + ' slots)');
                        setStatus('cd-status-1', 'Attente ' + backoffTime + 's', '#ffd93d');
                    }
                    
                    var progress = Math.min(time / (backoffTime * 30), 1);
                    ctx.fillStyle = '#ffd93d';
                    ctx.fillRect(50, 115, progress * (canvas.width - 100), 20);
                    
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 14px Arial';
                    var remaining = backoffTime - Math.floor(progress * backoffTime);
                    ctx.fillText('Attente: ' + remaining + ' slots', canvas.width / 2 - 60, 130);
                    
                    if (time > backoffTime * 30) {
                        phase = 3;
                        time = 0;
                        backoffExp.style.display = 'none';
                    }
                } else if (phase === 3) {
                    if (time === 20) {
                        addStatus('üîç √âtape 8: Nouvelle v√©rification du canal');
                        setStatus('cd-status-1', '√âcoute...', '#2196F3');
                        document.getElementById('cd-d1').classList.add('active');
                    }
                    
                    if (time === 80) {
                        addStatus('‚úÖ √âtape 9: Canal LIBRE - Transmission !');
                        setStatus('cd-status-1', 'Envoi donn√©es', '#4CAF50');
                    }
                    
                    if (time > 100 && time < 350) {
                        var progress = time - 100;
                        drawArrow(ctx, 150, 50, 150 + progress * 1.8, 115, '#4CAF50');
                        
                        ctx.fillStyle = '#4CAF50';
                        ctx.fillRect(150, 115, progress * 1.8, 20);
                        
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 14px Arial';
                        ctx.fillText('DONN√âES PC1', 200 + progress * 0.6, 130);
                    }
                    
                    if (time === 360) {
                        addStatus('üéâ √âtape 10: Transmission R√âUSSIE !');
                        setStatus('cd-status-1', '‚úÖ Succ√®s !', '#4CAF50');
                        
                        ctx.fillStyle = '#4CAF50';
                        ctx.font = 'bold 50px Arial';
                        ctx.fillText('‚úì', canvas.width / 2 - 25, 110);
                        
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 20px Arial';
                        ctx.fillText('SUCC√àS !', canvas.width / 2 - 45, 150);
                    }
                    
                    if (time > 480) {
                        addStatus('‚úÖ Simulation CSMA/CD termin√©e');
                        csmacdStopped = true;
                        return;
                    }
                }
                
                time++;
                animationFrames.csmacd = requestAnimationFrame(animate);
            }
            
            animate();
        }
        function stopCSMACD() {
            csmacdStopped = true;
            if (animationFrames.csmacd) {
                cancelAnimationFrame(animationFrames.csmacd);
            }
            var canvas = document.getElementById('csmacdCanvas');
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('cd-d1').classList.remove('active', 'collision');
            document.getElementById('cd-d2').classList.remove('active', 'collision');
            document.getElementById('cd-status-1').textContent = '';
            document.getElementById('cd-status-2').textContent = '';
            document.getElementById('backoffExplanation').style.display = 'none';
        }
        // CSMA/CA Demo
        function startCSMACA() {
            csmacaStopped = false;
            var canvas = document.getElementById('csmacaCanvas');
            var ctx = canvas.getContext('2d');
            var status = document.getElementById('csmacaStatus');
            var time = 0;
            var phase = 0;
            var handshakeShown = false;
            
            status.innerHTML = '';
            
            function addStatus(msg) {
                var line = document.createElement('div');
                line.className = 'step-indicator';
                line.textContent = msg;
                status.insertBefore(line, status.firstChild);
                if (status.children.length > 8) status.removeChild(status.lastChild);
            }
            
            function setStatus(id, text, color) {
                var el = document.getElementById(id);
                if (el) {
                    el.textContent = text;
                    el.style.color = color || '#4CAF50';
                }
            }
            
            function drawSignal(x, y, width, color, label) {
                ctx.fillStyle = color;
                ctx.fillRect(x, y - 10, width, 20);
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(label, x + 5, y + 5);
            }
            
            function animate() {
                if (csmacaStopped) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                ctx.strokeStyle = '#444';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(150, 100);
                ctx.lineTo(canvas.width / 2, 100);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 100);
                ctx.lineTo(canvas.width - 150, 100);
                ctx.stroke();
                
                ctx.fillStyle = '#888';
                ctx.font = '12px Arial';
                ctx.fillText('Canal WiFi', canvas.width / 2 - 35, 120);
                
                document.getElementById('ca-d1').classList.remove('active');
                document.getElementById('ca-ap').classList.remove('active');
                
                if (phase === 0) {
                    if (time === 0) {
                        addStatus('üì± √âtape 1: Device 1 souhaite transmettre');
                        setStatus('ca-status-d1', 'Pr√™t', '#2196F3');
                    }
                    if (time === 60) {
                        addStatus('‚è±Ô∏è √âtape 2: V√©rification DIFS');
                        setStatus('ca-status-d1', 'V√©rifie DIFS', '#ff9800');
                    }
                    if (time > 120) {
                        phase = 1;
                        time = 0;
                    }
                } else if (phase === 1) {
                    if (time === 20 && !handshakeShown) {
                        addStatus('ü§ù *** HANDSHAKE COMMENCE ! ***');
                        handshakeShown = true;
                        
                        ctx.fillStyle = 'rgba(255, 215, 0, 0.8)';
                        ctx.font = 'bold 40px Arial';
                        ctx.fillText('ü§ù', canvas.width / 2 - 20, 50);
                    }
                    
                    if (time === 30) {
                        addStatus('üì§ √âtape 3: Device 1 envoie RTS');
                        setStatus('ca-status-d1', 'üì§ Envoie RTS', '#ff9800');
                        document.getElementById('ca-d1').classList.add('active');
                    }
                    
                    if (time > 40 && time < 180) {
                        var progress = time - 40;
                        var startX = 150;
                        var endX = canvas.width / 2;
                        var currentX = startX + (endX - startX) * (progress / 140);
                        
                        drawArrow(ctx, startX, 50, currentX, 95, '#ff9800');
                        drawSignal(currentX - 40, 100, 40, '#ff9800', 'RTS');
                    }
                    
                    if (time === 200) {
                        setStatus('ca-status-ap', 'üì• Re√ßoit RTS', '#ff9800');
                        document.getElementById('ca-ap').classList.add('active');
                        addStatus('‚úÖ √âtape 4: AP accepte la demande');
                        phase = 2;
                        time = 0;
                    }
                } else if (phase === 2) {
                    if (time === 20) {
                        addStatus('üì• √âtape 5: AP envoie CTS');
                        setStatus('ca-status-ap', 'üì§ Envoie CTS', '#2196F3');
                        document.getElementById('ca-ap').classList.add('active');
                    }
                    
                    if (time > 40 && time < 180) {
                        var progress = time - 40;
                        var startX = canvas.width / 2;
                        var endX = 150;
                        var currentX = startX - (startX - endX) * (progress / 140);
                        
                        drawArrow(ctx, startX, 50, currentX, 95, '#2196F3');
                        drawSignal(currentX, 100, 40, '#2196F3', 'CTS');
                    }
                    
                    if (time === 200) {
                        document.getElementById('ca-d1').classList.add('active');
                        setStatus('ca-status-d1', 'üì• CTS re√ßu', '#4CAF50');
                        addStatus('üîí √âtape 6: Canal R√âSERV√â');
                        phase = 3;
                        time = 0;
                    }
                } else if (phase === 3) {
                    if (time === 20) {
                        addStatus('üìä √âtape 7: Transmission DATA');
                        setStatus('ca-status-d1', 'üìä Envoi DATA', '#4CAF50');
                        document.getElementById('ca-d1').classList.add('active');
                    }
                    
                    if (time > 40 && time < 240) {
                        var progress = time - 40;
                        var startX = 150;
                        var endX = canvas.width / 2;
                        var currentX = startX + (endX - startX) * (progress / 200);
                        
                        drawArrow(ctx, startX, 50, currentX, 95, '#4CAF50');
                        drawSignal(currentX - 60, 100, 60, '#4CAF50', 'DATA');
                    }
                    
                    if (time === 260) {
                        setStatus('ca-status-ap', 'üì• Donn√©es re√ßues', '#4CAF50');
                        document.getElementById('ca-ap').classList.add('active');
                        addStatus('‚úÖ √âtape 8: AP re√ßoit les donn√©es');
                        phase = 4;
                        time = 0;
                    }
                } else if (phase === 4) {
                    if (time === 20) {
                        addStatus('üì§ √âtape 9: AP envoie ACK via SIFS');
                        setStatus('ca-status-ap', 'üì§ Envoie ACK', '#9C27B0');
                        document.getElementById('ca-ap').classList.add('active');
                    }
                    
                    if (time > 40 && time < 160) {
                        var progress = time - 40;
                        var startX = canvas.width / 2;
                        var endX = 150;
                        var currentX = startX - (startX - endX) * (progress / 120);
                        
                        drawArrow(ctx, startX, 50, currentX, 95, '#9C27B0');
                        drawSignal(currentX, 100, 40, '#9C27B0', 'ACK');
                    }
                    
                    if (time === 180) {
                        document.getElementById('ca-d1').classList.add('active');
                        setStatus('ca-status-d1', '‚úÖ ACK re√ßu !', '#4CAF50');
                        addStatus('‚úÖ √âtape 10: Confirmation re√ßue');
                    }
                    
                    if (time === 220) {
                        addStatus('üéâ HANDSHAKE TERMIN√â - Transmission R√âUSSIE !');
                        
                        ctx.fillStyle = '#4CAF50';
                        ctx.font = 'bold 60px Arial';
                        ctx.fillText('‚úì', canvas.width / 2 - 30, 80);
                        
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 24px Arial';
                        ctx.fillText('SUCC√àS !', canvas.width / 2 - 60, 150);
                        
                        setStatus('ca-status-d1', '‚úÖ Succ√®s !', '#4CAF50');
                        setStatus('ca-status-ap', '‚úÖ Succ√®s !', '#4CAF50');
                    }
                    
                    if (time > 360) {
                        addStatus('‚úÖ Simulation CSMA/CA termin√©e');
                        csmacaStopped = true;
                        return;
                    }
                }
                
                time++;
                animationFrames.csmaca = requestAnimationFrame(animate);
            }
            
            animate();
        }
        function stopCSMACA() {
            csmacaStopped = true;
            if (animationFrames.csmaca) {
                cancelAnimationFrame(animationFrames.csmaca);
            }
            var canvas = document.getElementById('csmacaCanvas');
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('ca-d1').classList.remove('active');
            document.getElementById('ca-ap').classList.remove('active');
            document.getElementById('ca-status-d1').textContent = '';
            document.getElementById('ca-status-ap').textContent = '';
        }
        // Quiz functions
        function initQuiz() {
            var container = document.getElementById('quizContainer');
            container.innerHTML = '';
            
            for (var i = 0; i < quizQuestions.length; i++) {
                var q = quizQuestions[i];
                var questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                var html = '<h4>Question ' + (i + 1) + ': ' + q.question + '</h4>';
                html += '<div class="options" id="options-' + i + '">';
                for (var j = 0; j < q.options.length; j++) {
                    html += '<div class="option" onclick="selectOption(' + i + ',' + j + ')">' + q.options[j] + '</div>';
                }
                html += '</div>';
                
                questionDiv.innerHTML = html;
                container.appendChild(questionDiv);
            }
        }
        var userAnswers = {};
        function selectOption(questionIndex, optionIndex) {
            var optionsDiv = document.getElementById('options-' + questionIndex);
            var options = optionsDiv.querySelectorAll('.option');
            
            for (var i = 0; i < options.length; i++) {
                options[i].classList.remove('selected');
            }
            options[optionIndex].classList.add('selected');
            userAnswers[questionIndex] = optionIndex;
        }
        function submitQuiz() {
            if (Object.keys(userAnswers).length < quizQuestions.length) {
                alert('Veuillez r√©pondre √† toutes les questions avant de soumettre.');
                return;
            }
            
            var correctCount = 0;
            
            for (var i = 0; i < quizQuestions.length; i++) {
                var q = quizQuestions[i];
                var optionsDiv = document.getElementById('options-' + i);
                var options = optionsDiv.querySelectorAll('.option');
                
                for (var j = 0; j < options.length; j++) {
                    options[j].style.pointerEvents = 'none';
                    if (j === q.correct) {
                        options[j].classList.add('correct');
                    }
                    if (j === userAnswers[i] && j !== q.correct) {
                        options[j].classList.add('incorrect');
                    }
                }
                
                if (userAnswers[i] === q.correct) {
                    correctCount++;
                }
            }
            
            var percentage = Math.round((correctCount / quizQuestions.length) * 100);
            var resultContainer = document.getElementById('quizResultContainer');
            
            var message = '';
            var emoji = '';
            if (percentage >= 90) {
                message = 'Excellent ! Vous ma√Ætrisez parfaitement le sujet !';
                emoji = 'üèÜ';
            } else if (percentage >= 70) {
                message = 'Tr√®s bien ! Vous avez une bonne compr√©hension.';
                emoji = 'üéâ';
            } else if (percentage >= 50) {
                message = 'Pas mal ! Continuez √† apprendre.';
                emoji = 'üëç';
            } else {
                message = 'R√©visez le cours et r√©essayez.';
                emoji = 'üìö';
            }
            
            resultContainer.innerHTML = '<div class="quiz-result"><div style="font-size: 4em;">' + emoji + '</div><div class="score">' + correctCount + '/' + quizQuestions.length + '</div><h3>' + percentage + '%</h3><p style="font-size: 1.2em; margin-top: 15px;">' + message + '</p></div>';
            
            document.getElementById('submitQuizBtn').disabled = true;
        }
        function resetQuiz() {
            userAnswers = {};
            document.getElementById('quizResultContainer').innerHTML = '';
            document.getElementById('submitQuizBtn').disabled = false;
            
            for (var i = 0; i < quizQuestions.length; i++) {
                var optionsDiv = document.getElementById('options-' + i);
                var options = optionsDiv.querySelectorAll('.option');
                
                for (var j = 0; j < options.length; j++) {
                    options[j].classList.remove('selected', 'correct', 'incorrect');
                    options[j].style.pointerEvents = 'auto';
                }
            }
        }
        window.addEventListener('load', function() {
            var canvases = document.querySelectorAll('canvas');
            for (var i = 0; i < canvases.length; i++) {
                var canvas = canvases[i];
                canvas.width = 800;
                canvas.height = 250;
            }
        });
    </script>
</body>
</html>